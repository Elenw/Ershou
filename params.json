{"name":"Ershou","tagline":"就爱二手货，感觉自己萌萌哒。","body":"###网站安装指南 这里指针对Ubuntu 其他系统请参考\r\n\r\n本网站基于web.py框架制作 分为两个部分，数据抓取以及网站展现。 数据库采用sqlite\r\n\r\n如何安装web.py请参考\r\n\r\n<pre>http://webpy.org/install</pre>\r\n\r\n###抓取部分\r\n\r\n目录中Get文件夹内文件负责抓取信息\r\n\r\n抓取之前你应该安装如下依赖库:\r\n\r\n<pre>requests,pyquery</pre>\r\n\r\n安装后执行:\r\n\r\n<pre>python Get.py</pre>\r\n\r\n可以抓取数据\r\n\r\n在服务器中可利用 crontab进行定时抓取，本源码中已经写好了sh文件只需要如下操作\r\n\r\n先编辑文件根目录的get.sh\r\n\r\n<pre>vim get.sh</pre>\r\n\r\n修改为你的路径\r\n\r\n<pre>python /home/yourfile/get.py</pre>\r\n\r\n然后加入crontab\r\n\r\n<pre>crontab -e</pre>\r\n\r\n<pre>*/10  * * * * sh /home/yourfile/get.sh</pre>\r\n\r\n即可。\r\n\r\n注意：建议删除数据库文件重新抓取。\r\n\r\n###展现部分\r\n\r\n启动应用需要安装 gunicorn\r\n\r\n<pre>pip install gunicorn</pre>\r\n\r\n安装后启动服务\r\n\r\n<pre>gunicorn -w 8 app:ershou</pre>\r\n\r\n启动服务后默认端口为8000默认只允许127.0.0.1访问也就是只允许本机访问。 调试的时候可以加上如下参数\r\n\r\n<pre>gunicorn -w 8 0.0.0.0:8000 app:ershou</pre>\r\n\r\n这样就可以任意地址访问了。\r\n\r\nNginx 配置,把xmiao.org更换为你自己的域名就可以了。\r\n\r\n<pre>\r\nserver {\r\n  listen 80;\r\n  server_name xmiao.org www.xmiao.org;\r\n  access_log  /var/log/nginx/example.log;\r\n\r\n  location / {\r\n      proxy_pass http://127.0.0.1:8000;\r\n\r\n      proxy_set_header Host $host;\r\n      proxy_set_header X-Real-IP $remote_addr;\r\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n  }\r\n}\r\n\r\nserver {\r\n    listen 80;\r\n    server_name ershou.miaowu.asia;\r\n\r\n    location / {\r\n        rewrite     ^   http://www.xmiao.org$request_uri? permanent;\r\n    }\r\n}\r\n</pre>\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}